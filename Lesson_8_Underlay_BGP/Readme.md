# Занятие 8. Построение Underlay сети (BGP)
## **План работы**
1. Дизайн
  - Схема
  - Адресное пространство
  - Протоколы и общие замечания
2. Конфигурация
3. Проверка работоспособности
## 1. Дизайн

### Схема

### Адресное пространство
Распределение адресов для loopback интерфейсов /32:

| Loopback         | Spine1   | Spine2   | Leaf1    |Leaf2     |Leaf3     |
| ---------------- |:--------:| --------:|----------|----------|----------|    
| Lo1              | 10.0.1.0 | 10.0.2.0 | 10.0.1.1 | 10.0.1.2 | 10.0.1.3 |

Распределение адресов для p2p интерфейсов /31:

|  Узел/Интерфейс  | Leaf1   |Leaf2     |Leaf3     |Spine1    |Spine2    |
| ---------------- |:-------:| -------: |--------- |----------|----------|    
| Eth1             | 10.2.1.0| 10.2.1.2 | 10.2.1.4 | 10.2.1.1 | 10.2.2.1 |
| Eth2             | 10.2.2.0| 10.2.2.2 | 10.2.2.4 | 10.2.1.3 | 10.2.2.3 |
| Eth3             |         |          |          | 10.2.1.5 | 10.2.2.5 |

Суммированный маршрут для p2p соединений 10.2.0.0/15

### Протоколы и общие замечания
- Underlay сеть строим на eBGP.
- Для компактности конфигурации используем peer-group, адреса соседей и номера их AS задаем через диапазоны.
- Используем аутентификацию.
- Spine находятся в AS 65100, Leaf находятся в AS 65101-65103. Принцип нумерации 65m00 - для Spine, где m - номер POD от 0 до 9; 65mNN для Leaf, где NN - порядковый номер Leaf от 00 до 99.
- Топология с единственным POD.
- Все настроено в GRT, не используется VRF.

## 2. Конфигурация

Ниже приведены конфигурации узлов.

**Spine1**
```

```
**Spine2**
```

```
**Leaf1**
```

```
**Leaf2**
```

```
**Leaf3**
```

```
